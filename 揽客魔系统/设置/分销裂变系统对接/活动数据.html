<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>活动数据</title>
    <link rel="stylesheet" href="../../css/font-awesome.css?v=4.4.1" >
    <link rel="stylesheet" href="../../js/layui/css/layui.css" media="all">
    <link rel="stylesheet" href="../../js/layui/css/layer.css">
    <link rel="stylesheet" href="../../css/style.css">
    <style>
        .table_cont2 .table_body2{width:100%;table-layout:fixed;}
    </style>
</head>
<body id="chutiyan">

<div class="content">
    <div class="page-title">活动数据</div>
    <div class="tab_content2">
        <div class="tab_type_2">
            <span class="tab-tips search"><i class="search-tips"></i>搜索</span>
        </div>
    </div>
    <div class="edit_table2">
        <div class="table_cont2">
            <div class="table-thead">
                <table border="0" class="table_body2">
                    <thead>
                    <tr>
                        <th width="60px">序号</th>
                        <th width="100px">活动ID</th>
                        <th width="200px" class="left">活动名称</th>
                        <th width="100px">活动链接</th>
                        <th width="100px">报名用户</th>
                        <th width="100px">写入用户</th>
                        <th width="100px">异常数据</th>
                        <th width="150px">最后更新时间</th>
                        <th width="230px" class="stickyHR shadow">操作</th>
                    </tr>
                    </thead>
                </table>
            </div>
            <div class="table-tbody">
                <table border="0" class="table_body2">
                    <tbody>
                    <tr>
                        <td width="60px">1</td>
                        <td width="100px">123456</td>
                        <td width="200px" class="left">***分销活动</td>
                        <td width="100px" class="m-pic">
                            <div class="m-doub-pic">
                                <img src="../../images/2.png" alt="">
                            </div>
                        </td>
                        <td width="100px"><a class="bm-num">120</a></td>
                        <td width="100px"><a class="write-num">10</a></td>
                        <td width="100px">2</td>
                        <td width="150px" class="date"><div>2021-12-28 10:00:00</div></td>
                        <td width="230px" class="cz_btn stickyBR shadow">
                            <button type="button" class="btn-type1 update_btn">重新比对数据</button>
                            <button type="button" class="btn-type2 sq_btn">报名授权</button>
                        </td>
                    </tr>
                    <tr>
                        <td>2</td>
                        <td>******</td>
                        <td class="left"></td>
                        <td class="m-pic">
                            <div class="m-doub-pic">
                                <img src="../../images/2.png" alt="">
                            </div>
                        </td>
                        <td></td>
                        <td></td>
                        <td>0</td>
                        <td></td>
                        <td class="cz_btn stickyBR shadow">
                            <button type="button" class="btn-type1 update_btn2">重新比对数据</button>
                            <button type="button" class="btn-type2 sq_btn">报名授权</button>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <div class="btm_page2">
            <div class="pages">
                <div class="pages_num">
                    <span class="prev">上一页</span>
                    <span>1</span>
                    <span class="page-default">...</span>
                    <span>50</span>
                    <span class="active">51</span>
                    <span>52</span>
                    <span class="page-default">...</span>
                    <span>100</span>
                    <span class="next">下一页</span>
                </div>
                <!--  当输入好多页后，确定按钮才添加类名 active  -->
                <div class="now_page">当前所在<span class="total-msg">52</span>/100页，跳转到<input type="number" value="">页<span class="sure">确定</span></div>
            </div>
            <div class="page-nums">共<span class="total-msg">150</span>条，每页显示:
                <div class="select-text">
                    <span class="select-txt">10</span>
                    <ul>
                        <li>10</li>
                        <li>20</li>
                        <li>50</li>
                        <li>100</li>
                    </ul>
                </div>条
            </div>
        </div>
    </div>
</div>

<!--  搜索/排序  -->
<div class="account-box" id="search-account" style="display: none">
    <div class="account-cont account-cont2 ">
        <div class="account">
            <span class="account-l">活动ID:</span>
            <div class="account-r"><input type="text"></div>
        </div>
        <div class="account">
            <span class="account-l">活动名称:</span>
            <div class="account-r"><input type="text"></div>
        </div>
        <div class="account">
            <span class="account-l">最后更新时间:</span>
            <div class="account-r">
                <input type="text" class="layui-input" placeholder="开始时间" id="test1">
                <span class="date-line"></span>
                <input type="text" class="layui-input" placeholder="结束时间" id="test1">
            </div>
        </div>
    </div>
    <div class="btn-list2"><span class="btn ">清除所有</span><span class="btn btn-sure">确定</span></div>
</div>


<div class="activity_set activity_set2 " id="edit-sure" style="display: none">
    <div class="b-line">
        <div class="a_list">
            <span class="a_list_l">报名成为会员:</span>
            <div class="a_list_r">
                <div class="button-label-m">
                    <div class="toggle-button-wrapper bm_vip">
                        <input type="checkbox" id="bm-togg" class="toggle-button" name="switch">
                        <label for="bm-togg" class="button-label">
                            <span class="circle"></span>
                            <span class="text on">开启</span>
                            <span class="text off">关闭</span>
                        </label>
                    </div>
                </div>
                <div class="bmvip-cont" style="display: none;margin-left: 20px;">
                    <div style="display: flex;align-items: center;">
                        报名成为
                        <div class="select-text" style="margin: 0 10px;">
                            <span class="select-txt"></span>
                            <ul style="display: none;">
                                <li>VIP</li>
                                <li>合伙人</li>
                                <li>联创人</li>
                            </ul>
                        </div>
                        会员，会员有效期为<input type="text" class="s_width center" style="margin:0 8px">
                        <div class="select-text" style="margin: 0 10px;min-width: 60px;">
                            <span class="select-txt">天</span>
                            <ul style="display: none;text-align: center">
                                <li>天</li>
                                <li>月</li>
                            </ul>
                        </div>
                    </div>
                </div>
                <span class="tishi">*给已报名用户设置会员权益</span>
            </div>
        </div>
        <div class="a_list">
            <span class="a_list_l">授权系列课:</span>
            <div class="a_list_r">
                <span class="set-user chose-xlk">选择系列课</span>
                <a class="tishi is-xlk">已选择2个</a>
                <span class="tishi">*已报名用户可免费学习该处选择的系列课</span>
            </div>
        </div>
        <div class="a_list">
            <span class="a_list_l">授权专栏:</span>
            <div class="a_list_r">
                <span class="set-user chose-zl">选择专栏</span>
                <a class="tishi is-zl">已选择2个</a>
                <span class="tishi">*已报名用户可免费学习该处选择的专栏</span>
            </div>
        </div>

    </div>
    <div class="btn-list2"><span class="btn btn-cancel">取消</span><span class="btn btn-sure">保存</span></div>
</div>

<script src="../../js/jquery.min.js"></script>
<script src="../../js/layui/lay/modules/layer.js"></script>
<script src="../../js/layui/layui.js"></script>
<script src="../../js/myjs.js"></script>
<script>
    layui.use('laydate', function(){
        var laydate = layui.laydate;
        //执行一个laydate实例
        laydate.render({
            elem: '#test1' //指定元素
            ,type: 'datetime'
            ,calendar: true
            ,trigger: 'click'
        });
    });
    $('#chutiyan .search').on('click', function(){
        layer.open({
            type: 1,
            title: '搜索',
            shadeClose: true,
            shade: 0.3,
            area: ['700px', '436px'],
            skin: 'account-box',
            content: $("#search-account")
        });
    });
    $('#chutiyan .bm-num').on('click', function(){
        //iframe层
        layer.open({
            type: 2,
            title: '报名用户',
            shadeClose: true,
            shade: 0.3,
            maxmin: true, //开启最大化最小化按钮
            area: ['95%', '95%'],
            content: '报名用户.html' //iframe的url
        });
    });
    $('#chutiyan .write-num').on('click', function(){
        //iframe层
        layer.open({
            type: 2,
            title: '写入用户',
            shadeClose: true,
            shade: 0.3,
            maxmin: true, //开启最大化最小化按钮
            area: ['95%', '95%'],
            content: '写入用户.html' //iframe的url
        });
    });
    $('#chutiyan .sq_btn').on('click', function(){
        //iframe层
        layer.open({
            type: 1,
            title: '报名授权',
            shadeClose: true,
            shade: 0.3,
            area: ['80%', '80%'],
            skin: 'activity_set activity_set2 ',
            content: $("#edit-sure")
        });
    });

    $('#chutiyan .chose-xlk').on('click', function(){
        //iframe层
        layer.open({
            type: 2,
            title: '选择系列课',
            shadeClose: true,
            shade: 0.3,
            maxmin: true, //开启最大化最小化按钮
            area: ['95%', '95%'],
            content: '选择系列课.html#tab1' //iframe的url
        });
    });
    $('#chutiyan .is-xlk').on('click', function(){
        //iframe层
        layer.open({
            type: 2,
            title: '选择系列课',
            shadeClose: true,
            shade: 0.3,
            maxmin: true, //开启最大化最小化按钮
            area: ['95%', '95%'],
            content: '选择系列课.html#tab2' //iframe的url
        });
    });
    $('#chutiyan .chose-zl').on('click', function(){
        //iframe层
        layer.open({
            type: 2,
            title: '选择专栏',
            shadeClose: true,
            shade: 0.3,
            maxmin: true, //开启最大化最小化按钮
            area: ['95%', '95%'],
            content: '选择专栏.html#tab1' //iframe的url
        });
    });
    $('#chutiyan .is-zl').on('click', function(){
        //iframe层
        layer.open({
            type: 2,
            title: '选择专栏',
            shadeClose: true,
            shade: 0.3,
            maxmin: true, //开启最大化最小化按钮
            area: ['95%', '95%'],
            content: '选择专栏.html#tab2' //iframe的url
        });
    });





    $('.m-doub-pic').on('click',function (e) {
        e.stopPropagation();
        console.log(e.pageX + '--' + e.pageY);
        var html="";
        html+=`<div class="table-eq">
                <div class="show-pic">
                    <em></em>
                    <div style="margin-top: 0"><input type="text" value="http://ht.lkmsxy.com/Main2/main.aspx"><span>复制</span></div>
                </div>
            </div>`;
        $('.table-eq').remove();
        $('body').append(html);
        $(".table-eq").css({
            "left": e.pageX-180,
            "top": e.pageY+20,
        });
        $('.show-pic').click(function (e) {
            e.stopPropagation();
            $(this).show();
        });
    });

    //
    $('#chutiyan .update_btn').on('click', function(){
        layer.confirm('将从【裂变活动】拉取“全部报名用户”数据进行比对，查询遗漏用户写入系统！',{
            title:'重新比对数据',
            btn: ['取消','确定'],
            area: '416px'
        }, function(index){
            layer.close(index);
        }, function(){
            layui.use(['layer','jquery'], function () {
                var layer=layui.layer;
                var $=layui.jquery;
                layer.config({
                    extend: 'myskin/failure.css' //同样需要加载新皮肤
                });
                layer.confirm('不支持数据比对！该活动与当前系统使用的不是同一公众号！',{
                    title:'重新比对数据',
                    skin: 'failureskin',    //类名
                    icon:2,
                    btn: ['取消','确定'],
                    area: '416px'
                }, function(index){
                    layer.close(index);
                }, function(){

                });
            });
        });
    });
    $('#chutiyan .update_btn2').on('click', function(){
        layer.confirm('将从【裂变活动】拉取“全部报名用户”数据进行比对，查询遗漏用户写入系统！',{
            title:'重新比对数据',
            btn: ['取消','确定'],
            area: '416px'
        }, function(index){
            layer.close(index);
        }, function(){

            layer.open({
                type:1,
                title:'数据比对中',
                //btn: '取消',
                area: '416px',
                content: '<div style="padding: 30px 20px;">' +
                    '<div class="layui-progress layui-progress-big" lay-showpercent="true" lay-filter="demo">\n' +
                    '  <div class="layui-progress-bar" lay-percent="100%" style="width: 100%"><span class="layui-progress-text">100%</span></div>\n' +
                    '</div>' +
                    '<div class="notExpired" style="font-size: 28px;margin-top: 30px;text-align: center"><i class="layui-icon layui-icon-face-smile" style="font-size: 30px;"></i> 比对成功</div>' +
                '</div>'
            });
        });
    });

    $('.bm_vip label').click(function () {
        $('.bmvip-cont').toggle();
    });

</script>
</body>
</html>