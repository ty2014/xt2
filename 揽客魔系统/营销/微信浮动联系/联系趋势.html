<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>联系趋势</title>
    <link rel="stylesheet" href="../../js/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="../../css/font-awesome.css?v=4.4.1" >
    <link rel="stylesheet" href="../../css/style.css">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
<!--
    1.选择不同的时间范围，下面的数据也发生变化；
    2.时间选择器默认范围选择，可以选择同一天，layui中需要点击2次才能确认；可以设置为单击就确认，不需要点2次；
    3.选择了‘按时/按日/按周/按月’不同模式后，日期格式也发生变化；
    4.选择了不同的访客模式，下面的数据也要变化；
 -->
<!--

排序字段：时间、曝光量、扫描二维码、复制电话号、复制微信号

-->


<section class="head-slide">
    <div class="head-slide-item">
        <span>时间：</span>
        <div class="slide-span"><span>今天</span><span class="active">昨天</span><span>最近7天</span><span>最近30天</span></div>
        <div class="slide-input"><input type="text" class="demo-input" id="test1"></div>
    </div>
</section>
<section>
    <ul class="num-view">
        <li>
            <div>
                <p>曝光量<i class="tips" data-toggle="tooltip" data-html="true" data-placement="top" title="浮动联系人每展示一次计数+1。" data-original-title="1"></i></p>
                <span>2,989</span>
            </div>
        </li>
        <li>
            <div>
                <p>扫描二维码<i class="tips" data-toggle="tooltip" data-html="true" data-placement="top" title="用户扫描联系人“微信二维码”的次数，每长按一次计数+1。" data-original-title="1"></i></p>
                <span>1,526</span>
            </div>
        </li>
        <li>
            <div>
                <p>复制电话号<i class="tips" data-toggle="tooltip" data-html="true" data-placement="top" title="用户复制联系人“电话号”的次数，每长按一次计数+1。" data-original-title="1"></i></p>
                <span>568</span>
            </div>
        </li>
        <li>
            <div>
                <p>复制微信号<i class="tips" data-toggle="tooltip" data-html="true" data-placement="top" title="用户复制联系人“微信号”的次数，每长按一次计数+1。" data-original-title="1"></i></p>
                <span>895</span>
            </div>
        </li>
    </ul>
</section>
<section class="charts">
    <div id="main" style="height:400%;"></div>
</section>
<section class="table-content">
    <div class="tab_content">
        <div class="tab_type_l">
            <span><i class="fa fa-sort"></i>排序</span>
            <span><i class="fa fa-download"></i>导出</span>
        </div>
    </div>
    <form action="" class="table_cont">
        <table border="0" class="table_body">
            <thead>
            <tr>
                <th width="50px">序号</th>
                <th width="100px">时间<i class="sort-icon"></i></th>
                <th width="100px">曝光量<i class="sort-icon"></i></th>
                <th width="100px">扫描二维码<i class="sort-icon"></i></th>
                <th width="100px">复制电话号<i class="sort-icon"></i></th>
                <th width="100px">复制微信号<i class="sort-icon"></i></th>
            </tr>
            </thead>
            <tbody>
            <!-- 最多展示5条数据 -->
            <tr>
                <td>01</td>
                <!-- 无论所选时间段为某天或某段，均按24个小时划分展示数据 -->
                <td>23:00—23:59</td>
                <td>2,362</td>
                <td>362</td>
                <td>362</td>
                <td>165</td>
            </tr>
            <tr>
                <td>02</td>
                <td>23:00—23:59</td>
                <td>2,362</td>
                <td>462</td>
                <td>312</td>
                <td>265</td>
            </tr>
            </tbody>
        </table>
    </form>
    <div class="btm_page">
        <div class="pages">
            <div class="pages_num">
                <span>1</span>
                <span class="active">2</span>
                <span>3</span>
                <span>...</span>
                <span>99</span>
            </div>
            <div class="now_page">
                到第<input type="text" value="1">页<span class="sure">确定</span>
            </div>
            <select>
                <option value="10">10</option>
                <option value="20">20</option>
            </select>
        </div>
        <div>
            <span><b>1 - 10</b></span>
            <span>共<b>10</b>条</span>
        </div>
    </div>
</section>


<script src="../../js/jquery.min.js"></script>
<!-- iframe弹框 -->
<script src="../../js/dist/js/bootstrap.min.js"></script>
<script src="../../js/echarts.js"></script>
<script src="../../js/index.js"></script>
<script src="../../js/plugins/laydate/laydate.js"></script>
<!-- 时间 -->
<script>
    lay('#version').html('-v'+ laydate.v);
    //执行一个laydate实例
    laydate.render({
        elem: '#test1', //指定元素
        value: '2019-06-30 至 2019-08-15',
        range: '至'
    });
</script>
<!-- 图表 -->
<script>

    // 折线图
    var myChart = echarts.init(document.getElementById('main'));

    //  表中的左侧y轴代表的是“曝光率”

    var xData = ["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23"];
    var yData1 = [100,207,300,608,407,708,302,320,709,540,109,408,200,302,102,808,809,140,709,809,200,300,105,508];
    var yData2 = [33,37,40,48,57,68,42,42,49,14,49,28,28,82,52,28,19,74,15,19,20,13,59,48];
    var yData3 = [153,47,50,58,67,58,52,52,49,14,89,78,80,62,62,24,79,84,89,79,20,34,69,78];
    var yData4 = [13,57,60,28,77,48,62,72,29,74,59,18,25,34,72,88,11,64,10,29,20,63,79,28];
    option = {
        // 提示框
        tooltip: {
            trigger: 'axis',
            //  选择今天或昨天的格式
            formatter:function (params) {
                function timeNumer(t) {
                    var t1=t,
                        t2=t++,
                        t3=t1+':00-'+t2+':59';
                    return t3;
                }
                let res ='<div style="display: flex;justify-content: space-between;background: #f7f8fa;border-bottom: 1px solid #e8ebee;padding: 8px 10px;"><span>'+ timeNumer(params[0].name) +'</div>';

                for (let i = 0, l = params.length; i < l; i++) {
                     res += '<div style="width: 200px;display: flex;justify-content: space-between;padding: 4px 10px;margin:5px 0;"><div><span style="margin-right: 2px;">'+params[i].marker +'</span>' + '<span>'+ params[i].seriesName +'</span></div>' + '<span>'+params[i].value +'</span></div>';
                }
                return res
            },
            //  选择时间段的格式；如最近7天，最近30天。选择时间段后，x轴就显示对应点，7天就显示7个，每个点代表的是某一天的数据
            /*formatter:function (params) {
                function getNowFormatDate() {
                    var date = new Date();
                    var seperator1 = "-";
                    var year = date.getFullYear();
                    var month = date.getMonth() + 1;
                    var strDate = date.getDate();
                    if (month >= 1 && month <= 9) {
                        month = "0" + month;
                    }
                    if (strDate >= 0 && strDate <= 9) {
                        strDate = "0" + strDate;
                    }
                    var currentdate = year + seperator1 + month + seperator1 + strDate;
                    return currentdate;
                }
                let res ='<div style="display: flex;justify-content: space-between;background: #f7f8fa;border-bottom: 1px solid #e8ebee;padding: 8px 10px;"><span>'+ getNowFormatDate() + '</span>' + '</div>';

                for (let i = 0, l = params.length; i < l; i++) {
                    res += '<div style="width: 200px;display: flex;justify-content: space-between;padding: 4px 10px;margin:5px 0;"><div><span style="margin-right: 2px;">'+params[i].marker +'</span>' + '<span>'+ params[i].seriesName +'</span></div>' + '<span>'+params[i].value +'</span></div>';
                }
                return res
            },*/
            confine:true,        //是否将 tooltip 框限制在图表的区域内。
            backgroundColor:'#fff',
            borderColor:'#e7eaed',
            borderRadius:5,
            padding:0,
            textStyle:{
                color:'#666',
                fontSize:12
            },
            extraCssText:'box-shadow: 0px 0px 20px 0px rgba(86, 96, 118, 0.2)',
        },
        /* 图例 */
        legend: {
            right: '80px',
            y: '22px',
            textStyle: {
                color: '#999',
                fontSize: 12,
                rich:{
                    a:{
                        verticalAlign:'top',
                        align:'center',
                        lineHeight:10
                    }
                }
            },
            formatter:function (name) {
                let arr = [
                    '{a|'+name+'}'
                ];
                return  arr;
            },
            orient:'horizontal',
            itemGap:60,
            itemWidth:8,
            itemHeight:8,
            align:'auto',
            icon: 'square',
            data: ['曝光量','联系次数','扫描二维码','复制电话号']
        },

        //  直角坐标系
        grid: {
            right: '90px',
            bottom: '10%',
            left: '40px',
            top: '80px',
            containLabel: true
        },
        xAxis: [{
            type: 'category',
            data: xData ,
            nameTextStyle: {
                color: '#999',
            },
            axisLine: {
                show: false,
                lineStyle: {
                    color: 'transpartant',
                    backgroundColor: "#fff",
                }
            },
            axisTick: {
                show: false,
            },
            axisLabel: {
                show: true,
                textStyle: {
                    color: "#999",
                    fontSize: 12,
                    backgroundColor: "#fff",
                }
            },
            offset:10,
            boundaryGap:false   // 是否从 0 刻度开始
        }],
        yAxis: [
            {
                type: "value",
                position: "left",
                axisLine: {
                    show:false,
                    lineStyle: {
                        color: '#999'
                    }
                },
                splitLine: {
                    show:false,
                    lineStyle: {
                        color: "#f0f2f3",
                    }
                },
                axisTick:{
                    show:false
                },
                axisLabel: {
                    color: '#999',
                    fontSize: 12,
                },
                offset:10
            },
            {
                type: "value",
                position: "right",
                axisLine: {
                    show:false,
                    lineStyle: {
                        color: '#999'
                    }
                },
                splitLine: {
                    lineStyle: {
                        color: "#f0f2f3",
                    }
                },
                axisTick:{
                    show:false
                },
                axisLabel: {
                    color: '#999',
                    fontSize: 12,
                },
                offset:10
            }
        ],
        // 系列列表
        series: [
            {
                name: '曝光量',
                type: 'line',
                itemStyle: {
                    normal: {
                        color: '#3699ff',
                        borderWidth: 6,
                    }
                },
                lineStyle:{
                    width:1
                },
                data: yData1
            },
            {
                name: '联系次数',
                type: 'line',
                yAxisIndex: 1,
                itemStyle: {
                    normal: {
                        color: '#fee142',
                        borderWidth: 6,
                    }
                },
                lineStyle:{
                    width:1
                },
                data: yData2
            },
            {
                name: '扫描二维码',
                type: 'line',
                yAxisIndex: 1,
                itemStyle: {
                    normal: {
                        color: '#ff693b',
                        borderWidth: 6,
                    }
                },
                lineStyle:{
                    width:1
                },
                data: yData3
            },
            {
                name: '复制电话号',
                type: 'line',
                yAxisIndex: 1,
                itemStyle: {
                    normal: {
                        color: '#e4007f',
                        borderWidth: 6,
                    }
                },
                lineStyle:{
                    width:1
                },
                data: yData4
            }
        ]
    };

    myChart.setOption(option);


    setTimeout(function (){
        window.onresize = function () {
            myChart.resize();
        }
    },200);


</script>



</body>
</html>