<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>海报设置</title>
    <link rel="stylesheet" href="../../../../css/font-awesome.css?v=4.4.1" >
    <link rel="stylesheet" href="../../../../js/layui/css/layui.css" media="all">
    <link rel="stylesheet" href="../../../../js/layui/css/layer.css">
    <link rel="stylesheet" href="../../../../css/style.css">
    <style>
        .activity_tips span{color: #3983C0;margin-right:6px;cursor: pointer}
    </style>
</head>
<body id="chutiyan" style="padding: 0;">

<div class="activity_set activity_set2 w-120">
    <div class="b-line">
        <div class="a_list">
            <span class="a_list_l">海报标题:</span>
            <div class="a_list_r">
                <input type="text" class="w-620">
            </div>
        </div>
        <div class="dub-list">
            <div class="a_list">
                <span class="a_list_l">启用状态:</span>
                <div class="a_list_r">
                    <div class="button-label-m">
                        <div class="toggle-button-wrapper">
                            <input type="checkbox" id="u-togg" checked="" class="toggle-button" name="switch">
                            <label for="u-togg" class="button-label">
                                <span class="circle"></span>
                                <span class="text on">启用</span>
                                <span class="text off">停用</span>
                            </label>
                        </div>
                    </div>
                </div>
            </div>
            <div class="a_list">
                <span class="a_list_l">优先级:</span>
                <div class="a_list_r">
                    <input type="text" class="s_width center" value="100"><span class="tishi">*优先级越大，排序越前</span>
                </div>
            </div>
        </div>
        <div class="a_list">
            <span class="a_list_l" style="align-items: flex-start;padding-top: 25px">海报配置:</span>
            <div class="a_list_r">
                <div class="poster">
                    <div id='poster' style="width: 320px;min-width: 320px;margin-right: 40px;height: 562px;border:1px solid #d5d5d5;position:relative;z-index: 1;overflow: hidden;background: #fff;">
                        <img src="" class='bg' id="Img" style="width:100%;height: 100%;z-index:0;" alt="背景图"/>
                        <div class="drag u_pic" type="head" index="3" style="z-index:3;left:12px;top:12px;width:32px;height: 32px;position: absolute">
                            <img src="../../../../images/head.jpg" alt="头像" style="width:100%;height: 100%;border-radius: 50%;vertical-align: top"/>
                            <div class="rRightDown" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:nw-resize;right:-4px;bottom:-4px;"></div>
                            <div class="rLeftDown" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:ne-resize;left:-4px;bottom:-4px;"></div>
                            <div class="rRightUp" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:ne-resize;right:-4px;top:-4px;"></div>
                            <div class="rLeftUp" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:nw-resize;left:-4px;top:-4px;"></div>
                            <div class="rRight" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:e-resize;right:-4px;top:50%;margin-top:-4px;"></div>
                            <div class="rLeft" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:e-resize;left:-4px;top:50%;margin-top:-4px;"></div>
                            <div class="rUp" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:n-resize;top:-4px;left:50%;margin-left:-4px;"></div>
                            <div class="rDown" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:n-resize;bottom:-4px;left:50%;margin-left:-4px;"></div>
                        </div>
                        <div class="drag u_name" id="u_name" type="realname" index="4" style="z-index:4;left:58px;top:18px;position: absolute;cursor: default">
                            <div class="text" style="font-size: 15px;color: #333">昵称</div>
                            <div class="rRightDown" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:nw-resize;right:-4px;bottom:-4px;"></div>
                            <div class="rLeftDown" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:ne-resize;left:-4px;bottom:-4px;"></div>
                            <div class="rRightUp" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:ne-resize;right:-4px;top:-4px;"></div>
                            <div class="rLeftUp" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:nw-resize;left:-4px;top:-4px;"></div>
                            <div class="rRight" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:e-resize;right:-4px;top:50%;margin-top:-4px;"></div>
                            <div class="rLeft" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:e-resize;left:-4px;top:50%;margin-top:-4px;"></div>
                            <div class="rUp" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:n-resize;top:-4px;left:50%;margin-left:-4px;"></div>
                            <div class="rDown" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:n-resize;bottom:-4px;left:50%;margin-left:-4px;"></div>
                        </div>
                        <div class="drag" type="qr" index="2" style="z-index:2;left:220px;top:464px;width:82px;height:82px;position: absolute">
                            <img src="../../../../images/1.png" alt="二维码" style="width:100%;height: 100%;"/>
                            <div class="rRightDown" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:nw-resize;right:-4px;bottom:-4px;"></div>
                            <div class="rLeftDown" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:ne-resize;left:-4px;bottom:-4px;"></div>
                            <div class="rRightUp" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:ne-resize;right:-4px;top:-4px;"></div>
                            <div class="rLeftUp" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:nw-resize;left:-4px;top:-4px;"></div>
                            <div class="rRight" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:e-resize;right:-4px;top:50%;margin-top:-4px;"></div>
                            <div class="rLeft" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:e-resize;left:-4px;top:50%;margin-top:-4px;"></div>
                            <div class="rUp" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:n-resize;top:-4px;left:50%;margin-left:-4px;"></div>
                            <div class="rDown" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:n-resize;bottom:-4px;left:50%;margin-left:-4px;"></div>
                        </div>
                        <div class="drag zl_pic" type="zl_pic" index="1" style="z-index:1;left:0;top:0;width:100%;height:420px;background: #ddd;position: absolute">
                            <img src="" alt="海报图片" style="width:100%;height: 100%;"/>
                            <div class="rRightDown" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:nw-resize;right:-4px;bottom:-4px;"></div>
                            <div class="rLeftDown" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:ne-resize;left:-4px;bottom:-4px;"></div>
                            <div class="rRightUp" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:ne-resize;right:-4px;top:-4px;"></div>
                            <div class="rLeftUp" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:nw-resize;left:-4px;top:-4px;"></div>
                            <div class="rRight" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:e-resize;right:-4px;top:50%;margin-top:-4px;"></div>
                            <div class="rLeft" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:e-resize;left:-4px;top:50%;margin-top:-4px;"></div>
                            <div class="rUp" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:n-resize;top:-4px;left:50%;margin-left:-4px;"></div>
                            <div class="rDown" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:n-resize;bottom:-4px;left:50%;margin-left:-4px;"></div>
                        </div>
                        <div class="drag zl_title" id="zl_title" type="zl_title" index="2" style="z-index:2;left:17px;bottom:103px;width: 180px;height: 19px;position: absolute;cursor: default">
                            <div class="text" style="font-size: 17px;color: #333;font-weight: bold;height: 19px;overflow: hidden;background: #ddd;">专栏标题</div>
                            <div class="rRightDown" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:nw-resize;right:-4px;bottom:-4px;"></div>
                            <div class="rLeftDown" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:ne-resize;left:-4px;bottom:-4px;"></div>
                            <div class="rRightUp" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:ne-resize;right:-4px;top:-4px;"></div>
                            <div class="rLeftUp" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:nw-resize;left:-4px;top:-4px;"></div>
                            <div class="rRight" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:e-resize;right:-4px;top:50%;margin-top:-4px;"></div>
                            <div class="rLeft" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:e-resize;left:-4px;top:50%;margin-top:-4px;"></div>
                            <div class="rUp" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:n-resize;top:-4px;left:50%;margin-left:-4px;"></div>
                            <div class="rDown" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:n-resize;bottom:-4px;left:50%;margin-left:-4px;"></div>
                        </div>
                        <div class="drag zl_title2" id="zl_title2" type="zl_title2" index="2" style="z-index:2;left: 18px;bottom:60px;width: 180px;height: 36px;position: absolute;cursor: default">
                            <div class="text" style="font-size: 12px;color: #666;line-height: 150%;height: 36px;overflow: hidden;background: #ddd;">专栏简介</div>
                            <div class="rRightDown" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:nw-resize;right:-4px;bottom:-4px;"></div>
                            <div class="rLeftDown" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:ne-resize;left:-4px;bottom:-4px;"></div>
                            <div class="rRightUp" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:ne-resize;right:-4px;top:-4px;"></div>
                            <div class="rLeftUp" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:nw-resize;left:-4px;top:-4px;"></div>
                            <div class="rRight" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:e-resize;right:-4px;top:50%;margin-top:-4px;"></div>
                            <div class="rLeft" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:e-resize;left:-4px;top:50%;margin-top:-4px;"></div>
                            <div class="rUp" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:n-resize;top:-4px;left:50%;margin-left:-4px;"></div>
                            <div class="rDown" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:n-resize;bottom:-4px;left:50%;margin-left:-4px;"></div>
                        </div>
                        <div class="drag zl_num" id="zl_num" type="zl_num" index="3" style="z-index:3;left: 18px;bottom:18px;height: 28px;position: absolute;cursor: default">
                            <div class="text" style="display: flex;align-items: center;padding: 3px;width: 163px;background: linear-gradient(-97deg,rgb(253,168,101),rgb(249,82,28));border-radius: 14px;">
                                <img src="1.png" alt="" style="width:22px;vertical-align: middle;">
                                <span style="font-size: 15px;color: #fff;font-weight: bold;flex: 1;text-align: center;">已有2689人学习</span>
                            </div>
                            <div class="rRightDown" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:nw-resize;right:-4px;bottom:-4px;"></div>
                            <div class="rLeftDown" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:ne-resize;left:-4px;bottom:-4px;"></div>
                            <div class="rRightUp" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:ne-resize;right:-4px;top:-4px;"></div>
                            <div class="rLeftUp" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:nw-resize;left:-4px;top:-4px;"></div>
                            <div class="rRight" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:e-resize;right:-4px;top:50%;margin-top:-4px;"></div>
                            <div class="rLeft" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:e-resize;left:-4px;top:50%;margin-top:-4px;"></div>
                            <div class="rUp" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:n-resize;top:-4px;left:50%;margin-left:-4px;"></div>
                            <div class="rDown" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:n-resize;bottom:-4px;left:50%;margin-left:-4px;"></div>
                        </div>
                    </div>
                    <ul class="poster_setting">
                        <li>
                            <div class="set_tit">海报背景</div>
                            <div class="set_msg">
                                <div class="bg_pic">
                                    <div id="remark"><span></span><input id="f" type="file" onchange="chooseImg(this)" style="opacity: 0;"></div>
                                    <label for="f" class="hb_pic">选择背景图</label>
                                </div>
                            </div>
                        </li>
                        <li>
                            <div class="set_tit"></div>
                            <div class="set_msg">
                                <p class="tishi2" style="margin: 0">海报背景，最佳尺寸为：550*965，最佳大小为：500KB以下</p>
                            </div>
                        </li>
                        <li class="title2_msg hb_size">
                            <div class="set_tit">海报尺寸</div>
                            <div class="set_msg">
                                <p><span>宽：</span>320px，<span style="margin-left: 16px;">高：</span>562px</p>
                                <a class="set_hbsize" style="margin-left: 30px;">修改</a>
                            </div>
                        </li>
                        <li class="title2_msg hb_size_set" style="display: none">
                            <div class="set_tit">海报尺寸</div>
                            <div class="set_msg">
                                宽：<input type="number" class="s_width hbWidth" value="320">&nbsp;px&nbsp;,&nbsp;&nbsp;&nbsp;
                                高：<input type="number" class="s_width hbHeight" value="562">&nbsp;px
                                <button class="set_btn set_hbSizeBtn" style="margin-left: 40px;">确定修改尺寸</button>
                            </div>
                        </li>
                        <li class="RewardType">
                            <div class="set_tit">海报元素</div>
                            <div class="set_msg hb_element">
                                <div class="radio_list">
                                    <!--   默认就有，且必须要   -->
                                    <label for="h_qr" class="checked" style="cursor: no-drop;">
                                        <div class="chose">
                                            <input type="checkbox" checked disabled name="pic2" id="h_qr">
                                            <span class="checked-bg"></span>
                                        </div>
                                        <span class="msg_set_txt">二维码</span>
                                    </label>
                                    <label for="h_pic" class="checked" id="Uphoto_togg">
                                        <div class="chose">
                                            <input type="checkbox" checked name="pic2" id="h_pic">
                                            <span class="checked-bg"></span>
                                        </div>
                                        <span class="msg_set_txt">头像</span>
                                    </label>
                                    <label for="h_name" class="checked" id="Name_togg">
                                        <div class="chose">
                                            <input type="checkbox" checked name="pic2" id="h_name">
                                            <span class="checked-bg"></span>
                                        </div>
                                        <span class="msg_set_txt">昵称</span>
                                    </label>
                                    <label for="h_zlPic" class="checked" id="zlPic_togg">
                                        <div class="chose">
                                            <input type="checkbox" checked name="pic2" id="h_zlPic">
                                            <span class="checked-bg"></span>
                                        </div>
                                        <span class="msg_set_txt">海报图片</span>
                                    </label>
                                    <label for="h_zlTitle" class="checked" id="zlTitle_togg">
                                        <div class="chose">
                                            <input type="checkbox" checked name="pic2" id="h_zlTitle">
                                            <span class="checked-bg"></span>
                                        </div>
                                        <span class="msg_set_txt">专栏标题</span>
                                    </label>
                                    <label for="h_zlTitle2" class="checked" id="zlTitle2_togg">
                                        <div class="chose">
                                            <input type="checkbox" checked name="pic2" id="h_zlTitle2">
                                            <span class="checked-bg"></span>
                                        </div>
                                        <span class="msg_set_txt">专栏简介</span>
                                    </label>
                                    <label for="h_zlNum" class="checked" id="zlNum_togg">
                                        <div class="chose">
                                            <input type="checkbox" checked name="pic2" id="h_zlNum">
                                            <span class="checked-bg"></span>
                                        </div>
                                        <span class="msg_set_txt">学习人次</span>
                                    </label>
                                </div>
                            </div>
                        </li>
                        <li class="name_msg active">
                            <div class="set_tit">文本颜色</div>
                            <div class="set_msg">
                                <div class="fontSize_color">
                                    <span>#666666</span>       <!--  选择颜色后 要把 RGB格式 转换为 HEX 格式  -->
                                    <label for="onchange" onclick="rgb2hex()"></label>
                                    <input type="color" id="onchange" style="display: none"/>
                                </div>
                            </div>
                        </li>
                        <li class="name_msg active">
                            <div class="set_tit">文本大小</div>
                            <div class="set_msg">
                                <div class="select-text fontSize" style="min-width: 106px">
                                    <span class="select-txt">12</span>
                                    <ul style="display: none;">
                                        <li>12</li>
                                        <li>14</li>
                                        <li>16</li>
                                        <li>18</li>
                                        <li>20</li>
                                    </ul>
                                </div>
                            </div>
                        </li>
                        <li class="hpic_msg" style="display: flex;">
                            <div class="set_tit">头像形状</div>
                            <div class="set_msg">
                                <ul class="head_style">
                                    <li class="square">
                                        <label for="squ" class="radio">
                                            <div class="chose">
                                                <input type="radio"  name="statu" id="squ" />
                                                <span class="checked-bg"></span>
                                            </div>
                                            <span class="msg_set_txt">方形</span>
                                        </label>
                                    </li>
                                    <li class="circle">
                                        <label for="cir" class="radio">
                                            <div class="chose">
                                                <input type="radio" checked name="statu" id="cir" />
                                                <span class="checked-bg"></span>
                                            </div>
                                            <span class="msg_set_txt">圆形</span>
                                        </label>
                                    </li>
                                </ul>
                            </div>
                        </li>
                        <li class="title_msg">
                            <div class="set_tit">专栏标题</div>
                            <div class="set_msg">
                                <div class="select-text title-chose" style="min-width: 106px">
                                    <span class="select-txt">一行展示</span>
                                    <ul style="display: none;">
                                        <li>一行展示</li>
                                        <li>二行展示</li>
                                    </ul>
                                </div>
                            </div>
                        </li>
                        <li class="title2_msg">
                            <div class="set_tit">专栏简介</div>
                            <div class="set_msg">
                                <div class="select-text title2-chose" style="min-width: 106px">
                                    <span class="select-txt">二行展示</span>
                                    <ul style="display: none;">
                                        <li>一行展示</li>
                                        <li>二行展示</li>
                                        <li>三行展示</li>
                                    </ul>
                                </div>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <div class="btn-list2"><span class="btn btn-cancel">取消</span><span class="btn btn-sure">确定</span></div>
</div>

<script src="../../../../js/jquery.min.js"></script>
<script src="../../../../js/layui/layui.js"></script>
<script src="../../../../js/layui/lay/modules/layer.js"></script>
<script src="../../../../js/designer.js"></script>
<script src="../../../../js/myjs.js"></script>
<!--海报设置js-->
<script>
    $(function(){
        $('.set_hbsize').click(function () {
            $('.hb_size').hide();
            $('.hb_size_set').css('display','flex')
        });
        $('.set_hbSizeBtn').click(function () {
            $('.hb_size_set').hide();
            $('.hb_size').show();
            let w=$('.hbWidth').val(),
                h=$('.hbHeight').val();
            $('.hb_size .set_msg p').html('<span>宽：</span>'+ w +'，<span style="margin-left: 16px;">高：</span>'+ h);
            $('#poster').css({'width': w+'px','min-width': w+'px','height': h+'px'});
        });
        $('.circle').click(function(){
            $('.u_pic > img').css('border-radius','50%')
        });
        $('.square').click(function(){
            $('.u_pic > img').css('border-radius','0')
        });
        $('.fontSize li').click(function(){
            $('.u_name .text').css('fontSize',$(this).text()+'px');
            $('.fontSize_name span').text($(this).text());
        });
        $('.title-chose li').click(function(){
            let txt = $(this).text();
            switch (txt) {
                case '一行展示':
                    $('.zl_title,.zl_title .text').css('height','19px');
                    break;
                case '二行展示':
                    $('.zl_title,.zl_title .text').css('height','38px');
                    break;
            }
        });
        $('.title2-chose li').click(function(){
            let txt = $(this).text();
            switch (txt) {
                case '一行展示':
                    $('.zl_title2,.zl_title2 .text').css('height','18px');
                    break;
                case '二行展示':
                    $('.zl_title2,.zl_title2 .text').css('height','36px');
                    break;
                case '三行展示':
                    $('.zl_title2,.zl_title2 .text').css('height','54px');
                    break;
            }
        });
        $('#Uphoto_togg input').click(function(){
            $('#h_pic').attr("checked",true);
            $(this).find('.checked-bg').toggleClass('on');
            $('.hpic_msg').toggle();
            $('#squ').attr("checked",false);
            $('#cir').attr("checked",true);
            if($('#h_pic').is(':checked')){
                $('.u_pic').remove();
                $('#poster').append( '<div class="drag u_pic" type="head" index="3" style="z-index:3;left:14px;top:14px;width:36px;height: 36px;position: absolute">'+
                    '<img src="../../../../images/head.jpg" alt="头像" style="width:100%;height: 100%;border-radius: 50%;vertical-align: top"/>'+
                    '<div class="rRightDown" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:nw-resize;right:-4px;bottom:-4px;"></div>'+
                    '<div class="rLeftDown" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:ne-resize;left:-4px;bottom:-4px;"></div>'+
                    '<div class="rRightUp" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:ne-resize;right:-4px;top:-4px;"></div>'+
                    '<div class="rLeftUp" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:nw-resize;left:-4px;top:-4px;"></div>'+
                    '<div class="rRight" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:e-resize;right:-4px;top:50%;margin-top:-4px;"></div>'+
                    '<div class="rLeft" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:e-resize;left:-4px;top:50%;margin-top:-4px;"></div>'+
                    '<div class="rUp" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:n-resize;top:-4px;left:50%;margin-left:-4px;"></div>'+
                    '<div class="rDown" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:n-resize;bottom:-4px;left:50%;margin-left:-4px;"></div>'+
                    '</div>');
                $(function(){
                    $('.drag').each(function(){
                        bindEvents($(this));
                    });
                });
                $('.u_pic > img').css('border-radius','50%');
            }else{
                $('.u_pic').remove();
            }
        });
        $('#Name_togg input').click(function(){
            $('#h_name').attr("checkbox",true);
            $(this).find('.checked-bg').toggleClass('on');
            $('.name_msg').toggleClass('active');
            if($('#h_name').is(':checked')){
                $('.u_name').remove();
                $('#poster').append( '<div  class="drag u_name" id="u_name" type="realname" index="4" style="z-index:4;left:58px;top:24px;position: absolute;cursor: default">'+
                    '<div class="text" style="font-size: 12px;">昵称</div>'+
                    '<div class="rRightDown" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:nw-resize;right:-4px;bottom:-4px;"></div>'+
                    '<div class="rLeftDown" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:ne-resize;left:-4px;bottom:-4px;"></div>'+
                    '<div class="rRightUp" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:ne-resize;right:-4px;top:-4px;"></div>'+
                    '<div class="rLeftUp" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:nw-resize;left:-4px;top:-4px;"></div>'+
                    '<div class="rRight" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:e-resize;right:-4px;top:50%;margin-top:-4px;"></div>'+
                    '<div class="rLeft" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:e-resize;left:-4px;top:50%;margin-top:-4px;"></div>'+
                    '<div class="rUp" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:n-resize;top:-4px;left:50%;margin-left:-4px;"></div>'+
                    '<div class="rDown" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:n-resize;bottom:-4px;left:50%;margin-left:-4px;"></div>'+
                    '</div>');
                $(function(){
                    $('.drag').each(function(){
                        bindEvents($(this));
                    });
                })
            }else{
                $('.u_name').remove();
            }
        });
        $('#zlPic_togg input').click(function(){
            $('#h_zlPic').attr("checkbox",true);
            $(this).find('.checked-bg').toggleClass('on');
            if($('#h_zlPic').is(':checked')){
                $('.zl_pic').remove();
                $('#poster').append( '<div  class="drag zl_pic" id="zl_pic" type="zl_pic" index="1" style="z-index:1;left:0;top:0;width:100%;height:300px;background: #ddd;position: absolute">'+
                    '<img src="" alt="海报图片" style="width:100%;height: 100%;"/>'+
                    '<div class="rRightDown" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:nw-resize;right:-4px;bottom:-4px;"></div>'+
                    '<div class="rLeftDown" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:ne-resize;left:-4px;bottom:-4px;"></div>'+
                    '<div class="rRightUp" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:ne-resize;right:-4px;top:-4px;"></div>'+
                    '<div class="rLeftUp" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:nw-resize;left:-4px;top:-4px;"></div>'+
                    '<div class="rRight" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:e-resize;right:-4px;top:50%;margin-top:-4px;"></div>'+
                    '<div class="rLeft" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:e-resize;left:-4px;top:50%;margin-top:-4px;"></div>'+
                    '<div class="rUp" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:n-resize;top:-4px;left:50%;margin-left:-4px;"></div>'+
                    '<div class="rDown" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:n-resize;bottom:-4px;left:50%;margin-left:-4px;"></div>'+
                    '</div>');
                $(function(){
                    $('.drag').each(function(){
                        bindEvents($(this));
                    });
                })
            }else{
                $('.zl_pic').remove();
            }
        });
        $('#zlTitle_togg input').click(function(){
            $('#h_zlTitle').attr("checkbox",true);
            $(this).find('.checked-bg').toggleClass('on');
            $('.title_msg').toggle();
            if($('#h_zlTitle').is(':checked')){
                $('.zl_title').remove();
                $('#poster').append( '<div  class="drag zl_title" id="zl_title" type="zl_title" index="2" style="z-index:2;left:18px;bottom:100px;width: 180px;height: 19px;position: absolute;cursor: default">'+
                    '<div class="text" style="font-size: 16px;color: #333;font-weight: bold;height: 19px;overflow: hidden;background: #ddd;">专栏标题</div>'+
                    '<div class="rRightDown" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:nw-resize;right:-4px;bottom:-4px;"></div>'+
                    '<div class="rLeftDown" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:ne-resize;left:-4px;bottom:-4px;"></div>'+
                    '<div class="rRightUp" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:ne-resize;right:-4px;top:-4px;"></div>'+
                    '<div class="rLeftUp" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:nw-resize;left:-4px;top:-4px;"></div>'+
                    '<div class="rRight" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:e-resize;right:-4px;top:50%;margin-top:-4px;"></div>'+
                    '<div class="rLeft" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:e-resize;left:-4px;top:50%;margin-top:-4px;"></div>'+
                    '<div class="rUp" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:n-resize;top:-4px;left:50%;margin-left:-4px;"></div>'+
                    '<div class="rDown" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:n-resize;bottom:-4px;left:50%;margin-left:-4px;"></div>'+
                    '</div>');
                $(function(){
                    $('.drag').each(function(){
                        bindEvents($(this));
                    });
                })
            }else{
                $('.zl_title').remove();
            }
        });
        $('#zlTitle2_togg input').click(function(){
            $('#h_zlTitle2').attr("checkbox",true);
            $(this).find('.checked-bg').toggleClass('on');
            $('.title2_msg').toggle();
            if($('#h_zlTitle2').is(':checked')){
                $('.zl_title2').remove();
                $('#poster').append( '<div  class="drag zl_title2" id="zl_title2" type="zl_title2" index="2" style="z-index:2;left: 18px;bottom:60px;width: 180px;height: 36px;position: absolute;cursor: default">'+
                    '<div class="text" style="font-size: 10px;color: #666;line-height: 150%;height: 36px;overflow: hidden;background: #ddd;">专栏简介</div>'+
                    '<div class="rRightDown" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:nw-resize;right:-4px;bottom:-4px;"></div>'+
                    '<div class="rLeftDown" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:ne-resize;left:-4px;bottom:-4px;"></div>'+
                    '<div class="rRightUp" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:ne-resize;right:-4px;top:-4px;"></div>'+
                    '<div class="rLeftUp" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:nw-resize;left:-4px;top:-4px;"></div>'+
                    '<div class="rRight" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:e-resize;right:-4px;top:50%;margin-top:-4px;"></div>'+
                    '<div class="rLeft" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:e-resize;left:-4px;top:50%;margin-top:-4px;"></div>'+
                    '<div class="rUp" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:n-resize;top:-4px;left:50%;margin-left:-4px;"></div>'+
                    '<div class="rDown" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:n-resize;bottom:-4px;left:50%;margin-left:-4px;"></div>'+
                    '</div>');
                $(function(){
                    $('.drag').each(function(){
                        bindEvents($(this));
                    });
                })
            }else{
                $('.zl_title2').remove();
            }
        });
        $('#zlNum_togg input').click(function(){
            $('#h_zlNum').attr("checkbox",true);
            $(this).find('.checked-bg').toggleClass('on');
            if($('#h_zlNum').is(':checked')){
                $('.zl_num').remove();
                $('#poster').append( '<div  class="drag zl_num" id="zl_num" type="zl_num" index="3" style="z-index:3;left: 18px;bottom:18px;height: 28px;position: absolute;cursor: default">'+
                    '<div class="text" style="display: flex;align-items: center;padding: 3px;width: 163px;background: linear-gradient(-97deg,rgb(253,168,101),rgb(249,82,28));border-radius: 14px;">\n' +
                    '                                <img src="1.png" alt="" style="width:22px;vertical-align: middle;">\n' +
                    '                                <span style="font-size: 14px;color: #fff;font-weight: bold;flex: 1;text-align: center;">已有2689人学习</span>\n' +
                    '                            </div>'+
                    '<div class="rRightDown" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:nw-resize;right:-4px;bottom:-4px;"></div>'+
                    '<div class="rLeftDown" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:ne-resize;left:-4px;bottom:-4px;"></div>'+
                    '<div class="rRightUp" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:ne-resize;right:-4px;top:-4px;"></div>'+
                    '<div class="rLeftUp" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:nw-resize;left:-4px;top:-4px;"></div>'+
                    '<div class="rRight" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:e-resize;right:-4px;top:50%;margin-top:-4px;"></div>'+
                    '<div class="rLeft" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:e-resize;left:-4px;top:50%;margin-top:-4px;"></div>'+
                    '<div class="rUp" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:n-resize;top:-4px;left:50%;margin-left:-4px;"></div>'+
                    '<div class="rDown" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:n-resize;bottom:-4px;left:50%;margin-left:-4px;"></div>'+
                    '</div>');
                $(function(){
                    $('.drag').each(function(){
                        bindEvents($(this));
                    });
                })
            }else{
                $('.zl_num').remove();
            }
        });
    });
    function colorRGB2Hex(color) {
        var rgb = color.split(',');
        var r = parseInt(rgb[0].split('(')[1]);
        var g = parseInt(rgb[1]);
        var b = parseInt(rgb[2].split(')')[0]);
        var hex = "#" + ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1);
        return hex;
    }
    document.getElementById('onchange').onchange = function(){
        $('#u_name').css('color', this.value);
        setcolor();
    };
    function setcolor() {
        var link_col = $('#u_name').css('color');

        if (!link_col) {//未设置，就是初始值
            link_col = "rgb(102,102,102)";
        }

        var sHexColor = colorRGB2Hex(link_col);

        $('.fontSize_color label').css('background-color', link_col);
        $('.fontSize_color span').text(sHexColor)
    }
    function setfontsize() {
        //字号
        var fontsize = $("#u_name .text").css("font-size");
        if (!fontsize) {
            fontsize = "12px"; //默认字号
        }

        fontsize = fontsize.replace("px", "");
        $('.select-text ul li:contains(' + fontsize + ')').click();
    }
    function chooseImg(file){
        var file=file.files[0];
        var reader=new FileReader();
        reader.readAsDataURL(file);
        reader.onload=function(){
            var img=document.getElementById('Img');
            img.src=this.result;
        };
    }
    $("input[type=file]").change(function(){
        var str=$(this).val();
        if(str!==""){
            var arr=str.split("\\");
            var file_name=arr[arr.length-1];
            $(this).siblings('span').text(file_name);
        }
    });
</script>
<!-- 拖动缩放 -->
<script language='javascript'>
    $('form').submit(function(){
        $('.drag').each(function(){
            var obj = $(this);
            var type = obj.attr('type');
            var left = obj.css('left'),top = obj.css('top');
            var d= {left:left,top:top,type:obj.attr('type'),width:obj.css('width'),height:obj.css('height'),radius:obj.css('border-radius')};
            if(type=='head' ||type=='zl_pic' || type=='zl_pic' || type=='zl_title' || type=='zl_title2' || type=='zl_num'){
                d.size = obj.attr('size');
                d.color = obj.attr('color');
            } else if(type=='qr'){
                d.size = obj.attr('size');
            } else if(type=='img'){
                d.src = obj.attr('src');
            }else if(type=='head'){
                d.radius = obj.attr('border-radius');
            } else if(type=='fimg'){
                d.size = obj.attr('size');
            }//粉丝
            data.push(d);
        });
    });
    function bindEvents(obj){
        var index = obj.attr('index');
        var rs = new Resize(obj, { Max: true, mxContainer: "#poster" });
        rs.Set($(".rRightDown",obj), "right-down");
        rs.Set($(".rLeftDown",obj), "left-down");
        rs.Set($(".rRightUp",obj), "right-up");
        rs.Set($(".rLeftUp",obj), "left-up");
        rs.Set($(".rRight",obj), "right");
        rs.Set($(".rLeft",obj), "left");
        rs.Set($(".rUp",obj), "up");
        rs.Set($(".rDown",obj), "down");
        rs.Scale = true;
        var type = obj.attr('type');
        if(type=='realname' || type=='zl_title' || type=='zl_title2' || type=='zl_num' || type=='zl_pic'){
            // 关闭等比缩放
            rs.Scale = false;
        }
        new Drag(obj, { Limit: true, mxContainer: "#poster" });
        $('.drag .remove').unbind('click').click(function(){
            $(this).parent().remove();
        })

        obj.unbind('click').click(function(){
            bind($(this));
        })
    }
    var imgsettimer = 0 ;
    var nametimer = 0;
    var headsettimer = 0;
    var bgtimer = 0 ;
    function bindType(type){
        $("#goodsparams").hide();
        $(".type4").hide();
        if(type=='4'){
            $(".type4").show();
        } else if(type=='3'){
            $("#goodsparams").show();
        }
    }
    function clearTimers(){
        clearInterval(imgsettimer);
        clearInterval(nametimer);
        clearInterval(bgtimer);
        clearInterval(headsettimer);
    }
    function bind(obj){
        var imgset = $('#imgset'), nameset = $("#nameset"),qrset = $('#qrset'),headset =$("#headset"),fimgset =$("#fimgset");
        imgset.hide();nameset.hide();headset.hide();qrset.hide();fimgset.hide();
        clearTimers();
        var type = obj.attr('type');
        if(type=='realname' || type=='title' || type=='marketprice' || type=='productprice'){
            nameset.show();
            var color = obj.attr('color') || "#000";
            var size = obj.attr('size') || "12";
            var input = nameset.find('input:first');
            var namesize = nameset.find('#namesize');
            var picker = nameset.find('.sp-preview-inner');
            input.val(color); namesize.val(size.replace("pt",""));
            picker.css( {'background-color':color,'font-size':size});
            nametimer = setInterval(function(){
                obj.attr('color',input.val()).find('.text').css('color',input.val());
                obj.attr('size',namesize.val() +"pt").find('.text').css('font-size',namesize.val() +"pt");
            },100);
        } else if(type=='qr'){
            qrset.show();
            var size = obj.attr('size') || "3";
            var sel = qrset.find('#qrsize');
            sel.val(size);

            sel.unbind('change').change(function(){
                obj.attr('size',sel.val())
            });
        }else if(type=='head'){
            headset.show();
            var radius= obj.attr('border-radius') || "0px";

            var head_shape_checked=headset.find("#head_shape_val");
            $("input:radio[name='head_shape']").each(function(){
                if($(this).val()==radius){
                    $(this).prop("checked",true);
                }else{
                    $(this).prop("checked",false);
                }
            })

            head_shape_checked.val(radius);
            headsettimer = setInterval(function() {
                obj.attr('border-radius', head_shape_checked.val());
                obj.find('img').css('border-radius', head_shape_checked.val());
            },100);
        } else if(type=='fimg'){
            fimgset.show();
            var size = obj.attr('size') || "3";
            var sel = fimgset.find('#fimgset');
            sel.val(size);

            sel.unbind('change').change(function(){
                obj.attr('size',sel.val())
            });
        }
    }
    $(function(){
        $('.drag').each(function(){
            bindEvents($(this));
        });
    })
</script>
<script>
    $(function() {
        //二维码
        if ($("div[type=qr]").length == 0) {
            $("#h_qr").click();
        }
        //头像
        if ($("div[type=head]").length == 0) {
            $("#h_pic").click();
        }else{
            //头像形状
            if ($("div[type=head] img").css("border-radius") == "0px") {
                $("#squ").click();
            }else {
                $("#cir").click();
            }
        }
        //昵称
        if ($("div[type=realname]").length == 0) {
            $('#h_name').trigger("click");
        }else {
            //设置颜色
            setcolor();
            //设置字号
            setfontsize();
        }
        //商品主图
        if ($("div[type=sp_pic]").length == 0) {
            $("#h_spPic").click();
        }
        //商品标题
        if ($("div[type=sp_title]").length == 0) {
            $("#h_spTitle").click();
        }
        //时间
        if ($("div[type=sp_time]").length == 0) {
            $("#h_spTime").click();
        }
        //人气
        if ($("div[type=sp_rq]").length == 0) {
            $("#h_rqNum").click();
        }
    });
</script>

</body>
</html>