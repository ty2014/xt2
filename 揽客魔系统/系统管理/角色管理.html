<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>角色管理</title>
    <link rel="stylesheet" href="../css/font-awesome.css?v=4.4.1">
    <link rel="stylesheet" href="../js/layui/css/layui.css" media="all">
    <link rel="stylesheet" href="../js/layui/css/layer.css">
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="css/index.css">
    <style>
        html,body{height: 100%;}
        .user-ment{height: 100%;overflow: auto;}
        .table_cont2 .table_body2{width:100%;table-layout:fixed;}
        .btn-list2.on{position: absolute;bottom: 0;left: 0;right: 0;z-index: 101;}
        .activity_set{display: flex;flex-direction: column;}
    </style>
</head>
<body id="chutiyan">


<div class="user-ment">
    <div class="user-slide">
        <ul class="slideMore">
            <li class="normalId">
                <a><i class="layui-icon layui-icon-group"></i>默认角色</a>
                <ul class="second-nav">
                    <li class="active"><a><i class="layui-icon layui-icon-friends"></i>运营人员</a></li>
                    <li><a><i class="layui-icon layui-icon-friends"></i>销售管理员</a></li>
                    <li><a><i class="layui-icon layui-icon-friends"></i>管理员</a></li>
                </ul>
            </li>
            <li class="zdyId" style="">
                <a><i class="layui-icon layui-icon-group"></i>自定义角色<i class="layui-icon layui-icon-add-circle addId"></i></a>
                <ul class="second-nav">
                    <li><a><i class="layui-icon layui-icon-friends"></i>管理员（子账号）</a></li>
                </ul>
            </li>
        </ul>
    </div>
    <div style="flex: 1">
        <div class="contBlock">
            <div class="msg">
                <div class="msgL">
                    <i class="layui-icon layui-icon-friends"></i>管理员（子账号）
                    <!--  只有在自定义角色中展示该操作按钮  -->
                    <div class="icons" style="display: none">
                        <i class="layui-icon layui-icon-edit"></i>
                        <i class="layui-icon layui-icon-delete"></i>
                    </div>
                </div>
                <div class="msgR">
                    <i class="layui-icon layui-icon-user"></i>包含0人
                </div>
            </div>
            <p class="txt">管理员可以查看后台所有功能和数据，方便观察并调整客户运营及客服服务的私域策略，为决策提供数据参考</p>
        </div>
        <div class="activity_set activity_set3 w-4" style="min-height: 100%;">
            <!--  添加自定义角色、编辑角色时展示  -->
            <div class="b-line editId" style="display:none;">
                <div class="a_list">
                    <div class="a_list_r r-title">角色编辑</div>
                </div>
                <div class="a_list">
                    <div class="a_list_l">角色名称:</div>
                    <div class="a_list_r">
                        <div class="showNumBox">
                            <input type="text" placeholder="请输入角色名称">
                            <span class="num">0/10</span>
                        </div>
                    </div>
                </div>
                <div class="a_list">
                    <div class="a_list_l">描述:</div>
                    <div class="a_list_r">
                        <div class="showNumBox">
                            <textarea placeholder="请对角色进行描述" class="w-620" style="height: 80px;"></textarea>
                            <span class="num">0/200</span>
                        </div>
                    </div>
                </div>
            </div>
            <!--  角色权限设置，编辑的时候，权限也是可以编辑的  -->
            <div class="b-line" style="border: none;flex: 1;display: flex;flex-direction: column;">
                <div class="a_list">
                    <div class="a_list_r r-title">功能权限</div>
                </div>
                <div class="a_list" style="flex: 1;">
                    <div class="a_list_r" style="flex-wrap: nowrap;overflow: auto;">
                        <div class="powerItem">
                            <div id="power1"></div>
                            <div id="power1-2"></div>
                            <div id="power1-3"></div>
                            <div id="power1-4"></div>
                            <div id="power1-5"></div>
                            <div id="power1-6"></div>
                            <div id="power1-7"></div>
                            <div id="power1-8"></div>
                            <div id="power1-9"></div>
                            <div id="power1-10"></div>
                            <div id="power1-11"></div>
                            <div id="power1-12"></div>
                        </div>
                        <div class="powerItem">
                            <div id="power2"></div>
                        </div>
                        <div class="powerItem">
                            <div id="power3"></div>
                        </div>
                        <div class="powerItem">
                            <div id="power4"></div>
                        </div>
                        <div class="powerItem">
                            <div id="power5"></div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="btn-list2 on" style="display: none"><span class="btn btn-sure">保存</span></div>
        </div>
    </div>
    
    <div class="content" style="display: none">
        <div class="page-title">角色管理</div>
        <div class="tab_content2">
            <div class="tab_type_2">
                <span class="tab-tips search"><i class="fa fa-search"></i>搜索</span>
            </div>
            <div class="tab_type_2">
                <span class="tab-tips add_btn add_key"><i class="fa fa-plus"></i>添加</span>
            </div>
        </div>
        <div class="edit_table2">
            <div class="table_cont2">
                <div class="table-thead">
                    <table class="table_body2">
                        <thead>
                        <tr>
                            <th width="50px">
                                <label for="c1" class="checked">
                                    <div class="chose">
                                        <input type="checkbox" name="pic2" id="c1" />
                                        <span class="checked-bg"></span>
                                    </div>
                                </label>
                            </th>
                            <th width="50px">序号</th>
                            <th width="100px">角色名称</th>
                            <th width="100px">是否启用</th>
                            <th width="100px">排序码</th>
                            <th width="100px">角色类型</th>
                            <th width="150px">操作</th>
                        </tr>
                        </thead>
                    </table>
                </div>
                <div class="table-tbody">
                    <table class="table_body2">
                        <tbody>
                        <tr>
                            <td width="50px">
                                <label for="c2" class="checked">
                                    <div class="chose">
                                        <input type="checkbox" name="pic2" id="c2" />
                                        <span class="checked-bg"></span>
                                    </div>
                                </label>
                            </td>
                            <td width="50px">1</td>
                            <td width="100px" class="left"><a href="#" class="bm-name">成都快乐生活</a></td>
                            <td width="100px" class="statu statu1"><span>启用</span></td>
                            <td width="100px">3</td>
                            <td width="100px">公司角色</td>
                            <td width="150px" class="cz_btn">
                                <button type="button" class="permis_btn btn-type1">权限设置</button>
                                <button type="button" class="stop_btn btn-type2">停用</button>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="btm_page2">
                <div class="pages">
                    <div class="pages_num">
                        <span class="prev">上一页</span>
                        <span>1</span>
                        <span class="page-default">...</span>
                        <span>50</span>
                        <span class="active">51</span>
                        <span>52</span>
                        <span class="page-default">...</span>
                        <span>100</span>
                        <span class="next">下一页</span>
                    </div>
                    <!--  当输入好多页后，确定按钮才添加类名 active  -->
                    <div class="now_page">当前所在<span class="total-msg">52</span>/100页，跳转到<input type="number" value="">页<span class="sure">确定</span></div>
                </div>
                <div class="page-nums">共<span class="total-msg">150</span>条，每页显示:
                    <div class="select-text">
                        <span class="select-txt">10</span>
                        <ul>
                            <li>10</li>
                            <li>20</li>
                            <li>50</li>
                            <li>100</li>
                        </ul>
                    </div>条
                </div>
            </div>
        </div>
    </div>
</div>


<script src="../js/jquery.min.js"></script>
<!-- iframe弹框 -->
<script src="../js/layui/lay/modules/layer.js"></script>
<script src="../js/layui/layui.js"></script>
<script src="../js/myjs.js"></script>
<script>
    layui.use(['tree', 'util'], function(){
        var tree = layui.tree
            ,layer = layui.layer
            ,util = layui.util
            //模拟数据1
            ,data1 = [
                {
                    title: '成都快乐生活'
                    ,id: 1
                    ,disabled:true
                    ,children: [
                        {
                            title: '测试'
                            ,id: 1000
                            ,checked:true
                            ,disabled:true
                            ,children: [
                                {
                                    title: '测试'
                                    ,id: 1000
                                    ,checked:true
                                    ,disabled:true
                                },{
                                    title: '揽客魔'
                                    ,id: 1001
                                    ,disabled:true
                                }
                            ]
                        },{
                            title: '揽客魔'
                            ,id: 1001
                            ,disabled:true
                        }
                    ]
                }
            ];

        tree.render({
            elem: '#power1,#power1-2,#power1-3,#power1-4,#power1-5,#power1-6,#power1-7,#power1-8,#power1-9,#power1-10,#power1-11,#power1-12'
            ,data: data1
            ,showLine: false  //是否开启连接线
            ,showCheckbox: true  //是否显示复选框
            ,onlyIconControl:true  // 仅允许节点左侧图标控制展开收缩
        });
        tree.render({
            elem: '#power2'
            ,data: data1
            ,showLine: false  //是否开启连接线
            ,showCheckbox: true  //是否显示复选框
            ,onlyIconControl:true  // 仅允许节点左侧图标控制展开收缩
        });
        tree.render({
            elem: '#power3'
            ,data: data1
            ,showLine: false  //是否开启连接线
            ,showCheckbox: true  //是否显示复选框
            ,onlyIconControl:true  // 仅允许节点左侧图标控制展开收缩
        });
        tree.render({
            elem: '#power4'
            ,data: data1
            ,showLine: false  //是否开启连接线
            ,showCheckbox: true  //是否显示复选框
            ,onlyIconControl:true  // 仅允许节点左侧图标控制展开收缩
        });
        tree.render({
            elem: '#power5'
            ,data: data1
            ,showLine: false  //是否开启连接线
            ,showCheckbox: true  //是否显示复选框
            ,onlyIconControl:true  // 仅允许节点左侧图标控制展开收缩
        });
    });

    $('.slideMore .second-nav li').click(function () {
        $(this).addClass('active').siblings().removeClass('active');
        $(this).parents('li').siblings().find('li').removeClass('active');
        unedit()
    })
    $('.normalId li').click(function () {
        $('.contBlock .icons').hide();
    })
    $('.zdyId li').click(function () {
        $('.contBlock .icons').show();
    })
    $('.zdyId .addId,.contBlock .layui-icon-edit').click(function () {
        edit()
    })
    // 编辑角色
    function edit() {
        $('.contBlock').hide();
        $('.editId,.btn-list2').show();
    }
    // 关闭编辑角色
    function unedit() {
        $('.contBlock').show();
        $('.editId,.btn-list2').hide();
    }
    layui.use(['layer','jquery'], function () {
        var layer=layui.layer;
        var $=layui.jquery;
        $('.contBlock .layui-icon-delete').on('click', function(){
            layer.config({
                extend: 'myskin/failure.css' //同样需要加载新皮肤
            });
            layer.confirm('是否确定删除该角色？',{
                skin: 'failureskin',    //类名
                icon:2,
                btn: ['取消','确定'],
                area: '416px'
            }, function(index){
                layer.close(index);
            }, function(){
                layer.msg('删除成功', {time: 1000});
            });
        });
    });

    // 旧版
    $('#chutiyan .permis_btn').on('click', function(){
        //iframe层
        layer.open({
            type: 2,
            title: '权限管理',
            shadeClose: true,
            shade: 0.3,
            maxmin: true, //开启最大化最小化按钮
            area: ['90%', '90%'],
            content: '权限管理.html' //iframe的url
        });
    });
    $('#chutiyan .add_btn,#chutiyan .bm-name').on('click', function(){
        //iframe层
        layer.open({
            type: 2,
            title: '添加角色',
            shadeClose: true,
            shade: 0.3,
            maxmin: true, //开启最大化最小化按钮
            area: ['500px', '390px'],
            content: '角色管理-添加.html' //iframe的url
        });
    });
    $('#chutiyan .stop_btn').on('click', function(){
        layer.confirm('您确定要停用此角色吗？', {
            btn: ['确定','取消'] //按钮
        }, function(){}, function(){});
    });
</script>
</body>
</html>