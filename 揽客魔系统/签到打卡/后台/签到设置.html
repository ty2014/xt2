<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>签到设置</title>
    <link rel="stylesheet" href="../../css/font-awesome.css?v=4.4.1" >
    <link rel="stylesheet" href="../../js/layui/css/layui.css" media="all">
    <link rel="stylesheet" href="../../js/layui/css/layer.css">
    <link rel="stylesheet" href="../../css/style.css">
    <link rel="stylesheet" href="css/style.css"/>
</head>
<body style="height: auto">
    <div class="gz-content">
    <p class="title">签到设置</p>
    <div class="activity_set">
        <div class="b-line">
            <div class="a_list ">
                <span class="a_list_l">启用状态:</span>
                <div class="a_list_r">
                    <div class="htmleaf-content">
                        <div class="checkbox" id="vip-btn">
                            <input type="checkbox"/>
                            <label></label>
                        </div>
                    </div>
                    <span class="tishi">*关闭后，前端将隐藏访问入口</span>
                </div>
            </div>
            <div class="a_list">
                <span class="a_list_l">访问网址:</span>
                <div class="a_list_r">http：//lankemo.qiandao</div>
            </div>
            <div class="a_list">
                <span class="a_list_l">每日可解锁:</span>
                <div class="a_list_r"><input type="number" class="s_width center m-height"/>&nbsp;&nbsp;张签到图</div>
            </div>
            <div class="a_list" style="align-items: flex-start">
                <span class="a_list_l" style="align-items: flex-start;padding-top: 20px">签到图排版:</span>
                <div class="a_list_r">
                    <div class="poster">
                        <div id='poster'>
                            <div style="display: none;width:100%;height: 100%;">
                                <img src="../images/111111.jpg" alt="" style="width:100%;height: 100%;z-index:0;vertical-align: middle;">
                            </div>
                            <img src='../images/1.jpg' class='bg' id="Img" style="width:100%;height: 100%;z-index:0;vertical-align: middle;"/>
                            <div class="drag date" id="date" type="date" index="1" style="zindex:1;left:216px;top:11px;width: 44px;height: 44px;background: rgba(255,255,255,.26);display: flex;flex-direction: column;justify-content: center;padding: 0 2px;">
                                <div class="data time"><p>30</p>2019.11</div>
                                <div class="rRightDown" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:nw-resize;right:-4px;bottom:-4px;"></div>
                                <div class="rLeftDown" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:ne-resize;left:-4px;bottom:-4px;"></div>
                                <div class="rRightUp" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:ne-resize;right:-4px;top:-4px;"></div>
                                <div class="rLeftUp" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:nw-resize;left:-4px;top:-4px;"></div>
                                <div class="rRight" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:e-resize;right:-4px;top:50%;margin-top:-4px;"></div>
                                <div class="rLeft" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:e-resize;left:-4px;top:50%;margin-top:-4px;"></div>
                                <div class="rUp" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:n-resize;top:-4px;left:50%;margin-left:-4px;"></div>
                                <div class="rDown" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:n-resize;bottom:-4px;left:50%;margin-left:-4px;"></div>
                            </div>
                            <div class="drag week" id="week" type="week" index="2" style="zindex:2;left:216px;top:64px;width: 44px;height: 44px;background: rgba(255,255,255,.26);">
                                <div class="data week">周一<p><span>Monday</span></p></div>
                                <div class="rRightDown" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:nw-resize;right:-4px;bottom:-4px;"></div>
                                <div class="rLeftDown" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:ne-resize;left:-4px;bottom:-4px;"></div>
                                <div class="rRightUp" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:ne-resize;right:-4px;top:-4px;"></div>
                                <div class="rLeftUp" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:nw-resize;left:-4px;top:-4px;"></div>
                                <div class="rRight" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:e-resize;right:-4px;top:50%;margin-top:-4px;"></div>
                                <div class="rLeft" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:e-resize;left:-4px;top:50%;margin-top:-4px;"></div>
                                <div class="rUp" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:n-resize;top:-4px;left:50%;margin-left:-4px;"></div>
                                <div class="rDown" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:n-resize;bottom:-4px;left:50%;margin-left:-4px;"></div>
                            </div>
                            <div class="drag" id="" type="qr" index="3" style="zindex:3;left:220px;top:448px;width:48px;height:48px">
                                <img src="http://cshtml.lkmsxy.com/eq.jpg" style="width: 100%;"/>
                                <div class="rRightDown" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:nw-resize;right:-4px;bottom:-4px;"></div>
                                <div class="rLeftDown" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:ne-resize;left:-4px;bottom:-4px;"></div>
                                <div class="rRightUp" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:ne-resize;right:-4px;top:-4px;"></div>
                                <div class="rLeftUp" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:nw-resize;left:-4px;top:-4px;"></div>
                                <div class="rRight" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:e-resize;right:-4px;top:50%;margin-top:-4px;"></div>
                                <div class="rLeft" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:e-resize;left:-4px;top:50%;margin-top:-4px;"></div>
                                <div class="rUp" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:n-resize;top:-4px;left:50%;margin-left:-4px;"></div>
                                <div class="rDown" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:n-resize;bottom:-4px;left:50%;margin-left:-4px;"></div>
                            </div>
                            <div class="drag msg" id="msg" type="msg" index="4" style="zindex:4;left:12px;right: 12px;top:350px;">
                                <div class="u-msg">
                                    <div class="u-pic"><img src="../../images/head2.jpg" alt=""></div>
                                    <div class="msg-txt">
                                        <div class="txt1"><span class="time">15:48</span>累计学习<span class="day">2天</span></div>
                                        <p class="txt2">174489人正在参与，已超过12%的人</p>
                                    </div>
                                </div>
                                <div class="rRightDown" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:nw-resize;right:-4px;bottom:-4px;"></div>
                                <div class="rLeftDown" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:ne-resize;left:-4px;bottom:-4px;"></div>
                                <div class="rRightUp" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:ne-resize;right:-4px;top:-4px;"></div>
                                <div class="rLeftUp" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:nw-resize;left:-4px;top:-4px;"></div>
                                <div class="rRight" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:e-resize;right:-4px;top:50%;margin-top:-4px;"></div>
                                <div class="rLeft" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:e-resize;left:-4px;top:50%;margin-top:-4px;"></div>
                                <div class="rUp" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:n-resize;top:-4px;left:50%;margin-left:-4px;"></div>
                                <div class="rDown" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:n-resize;bottom:-4px;left:50%;margin-left:-4px;"></div>
                            </div>
                        </div>
                        <ul class="poster_setting">
                            <li>
                                <div class="set_tit">背景图片</div>
                                <div class="set_msg">
                                    <div class="bg_pic">
                                        <div id="remark"><span></span><input id="f" type="file" onchange="chooseImg(this)" style="opacity: 0;"></div>
                                        <label for="f" class="hb_pic">选择背景图</label>
                                    </div>
                                </div>
                            </li>
                            <li>
                                <div class="set_tit"></div>
                                <div class="set_msg">
                                    <p class="tishi2" style="margin: 0">签到背景，最佳尺寸为：750px * 1400px，大小不超过1000KB</p>
                                </div>
                            </li>
                            <li class="RewardType">
                                <div class="set_tit">签到元素</div>
                                <div class="set_msg hb_element">
                                    <div class="radio_list">
                                        <!--   默认就有，且必须要   -->
                                        <label for="h_qr" class="checked" style="cursor: no-drop;">
                                            <div class="chose">
                                                <input type="checkbox" checked disabled name="pic2" id="h_qr">
                                                <span class="checked-bg"></span>
                                            </div>
                                            <span class="msg_set_txt">二维码</span>
                                        </label>
                                        <label for="h_pic" class="checked" id="Uphoto_togg">
                                            <div class="chose">
                                                <input type="checkbox" checked name="pic2" id="h_pic">
                                                <span class="checked-bg"></span>
                                            </div>
                                            <span class="msg_set_txt">头像</span>
                                        </label>
                                        <label for="h_date" class="checked" id="date_togg">
                                            <div class="chose">
                                                <input type="checkbox" checked name="pic2" id="h_date">
                                                <span class="checked-bg"></span>
                                            </div>
                                            <span class="msg_set_txt">日期</span>
                                        </label>
                                        <label for="h_week" class="checked" id="week_togg">
                                            <div class="chose">
                                                <input type="checkbox" checked name="pic2" id="h_week">
                                                <span class="checked-bg"></span>
                                            </div>
                                            <span class="msg_set_txt">星期</span>
                                        </label>
                                        <label for="h_card" class="checked" id="card_togg">
                                            <div class="chose">
                                                <input type="checkbox" checked name="pic2" id="h_card">
                                                <span class="checked-bg"></span>
                                            </div>
                                            <span class="msg_set_txt">名片</span>
                                        </label>
                                    </div>
                                </div>
                            </li>
                            <li class="hpic_msg" style="display: flex;">
                                <div class="set_tit">头像形状</div>
                                <div class="set_msg">
                                    <ul class="head_style">
                                        <li class="square">
                                            <label for="squ" class="radio">
                                                <div class="chose">
                                                    <input type="radio"  name="statu" id="squ" />
                                                    <span class="checked-bg"></span>
                                                </div>
                                                <span class="msg_set_txt">方形</span>
                                            </label>
                                        </li>
                                        <li class="circle">
                                            <label for="cir" class="radio">
                                                <div class="chose">
                                                    <input type="radio" checked name="statu" id="cir" />
                                                    <span class="checked-bg"></span>
                                                </div>
                                                <span class="msg_set_txt">圆形</span>
                                            </label>
                                        </li>
                                    </ul>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <div class="btn-list"><span class="btn btn-sure">保存</span></div>
    </div>
</div>




<script src="../../js/jquery.min.js"></script>
<script src="../../js/layui/layui.js"></script>
<script src="../../js/layui/lay/modules/layer.js"></script>
<script src="../../js/designer.js"></script>
<script src="../../js/myjs.js"></script>
<!--海报设置js-->
<script>
    $(function(){
        $('.circle').click(function(){
            $('.u_pic > img').css('border-radius','50%')
        });
        $('.square').click(function(){
            $('.u_pic > img').css('border-radius','0')
        });

        $('#Uphoto_togg input').click(function(){
            $('#h_pic').attr("checked",true);
            $(this).find('.checked-bg').toggleClass('on');
            $('.hpic_msg').toggle();
            $('#squ').attr("checked",true);
            $('#cir').attr("checked",false);
            if($('#h_pic').is(':checked')){
                $('.u_pic').remove();
                $('#poster').append( '<div class="drag u_pic" type="head" index="3" style="z-index:3;left:20px;bottom:80px;width:36px;height: 36px;position: absolute">'+
                    '<img src="../../images/head.jpg" alt="头像" style="width:100%;height: 100%;border-radius: 50%;vertical-align: top"/>'+
                    '<div class="rRightDown" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:nw-resize;right:-4px;bottom:-4px;"></div>'+
                    '<div class="rLeftDown" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:ne-resize;left:-4px;bottom:-4px;"></div>'+
                    '<div class="rRightUp" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:ne-resize;right:-4px;top:-4px;"></div>'+
                    '<div class="rLeftUp" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:nw-resize;left:-4px;top:-4px;"></div>'+
                    '<div class="rRight" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:e-resize;right:-4px;top:50%;margin-top:-4px;"></div>'+
                    '<div class="rLeft" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:e-resize;left:-4px;top:50%;margin-top:-4px;"></div>'+
                    '<div class="rUp" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:n-resize;top:-4px;left:50%;margin-left:-4px;"></div>'+
                    '<div class="rDown" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:n-resize;bottom:-4px;left:50%;margin-left:-4px;"></div>'+
                    '</div>');
                $(function(){
                    $('.drag').each(function(){
                        bindEvents($(this));
                    });
                });
                $('.u_pic > img').css('border-radius','0');
            }else{
                $('.u_pic').remove();
            }
        });
        $('#date_togg input').click(function(){
            $('#h_date').attr("checkbox",true);
            $(this).find('.checked-bg').toggleClass('on');
            if($('#h_date').is(':checked')){
                $('.date').remove();
                $('#poster').append('<div class="drag date" id="date" type="date" index="1" style="zindex:1;right:12px;top:16px;width: 44px;height: 44px;background: rgba(255,255,255,.26);display: flex;flex-direction: column;justify-content: center;padding: 0 2px;">\n' +
                    '<div class="data time"><p>30</p>2019.11</div>\n' +
                    '<div class="rRightDown" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:nw-resize;right:-4px;bottom:-4px;"></div>\n' +
                    '<div class="rLeftDown" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:ne-resize;left:-4px;bottom:-4px;"></div>\n' +
                    '<div class="rRightUp" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:ne-resize;right:-4px;top:-4px;"></div>\n' +
                    '<div class="rLeftUp" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:nw-resize;left:-4px;top:-4px;"></div>\n' +
                    '<div class="rRight" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:e-resize;right:-4px;top:50%;margin-top:-4px;"></div>\n' +
                    '<div class="rLeft" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:e-resize;left:-4px;top:50%;margin-top:-4px;"></div>\n' +
                    '<div class="rUp" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:n-resize;top:-4px;left:50%;margin-left:-4px;"></div>\n' +
                    '<div class="rDown" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:n-resize;bottom:-4px;left:50%;margin-left:-4px;"></div>\n' +
                    '</div>');
                $(function(){
                    $('.drag').each(function(){
                        bindEvents($(this));
                    });
                })
            }else{
                $('.date').remove();
            }
        });
        $('#week_togg input').click(function(){
            $('#h_week').attr("checkbox",true);
            $(this).find('.checked-bg').toggleClass('on');
            if($('#h_week').is(':checked')){
                $('.week').remove();
                $('#poster').append( '<div  class="drag week" id="week" type="week" index="2" style="zindex:2;right:12px;top:68px;width: 44px;height: 44px;background: rgba(255,255,255,.26);">'+
                    '<div class="data week">周一<p><span>Monday</span></p></div>'+
                    '<div class="rRightDown" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:nw-resize;right:-4px;bottom:-4px;"></div>'+
                    '<div class="rLeftDown" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:ne-resize;left:-4px;bottom:-4px;"></div>'+
                    '<div class="rRightUp" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:ne-resize;right:-4px;top:-4px;"></div>'+
                    '<div class="rLeftUp" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:nw-resize;left:-4px;top:-4px;"></div>'+
                    '<div class="rRight" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:e-resize;right:-4px;top:50%;margin-top:-4px;"></div>'+
                    '<div class="rLeft" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:e-resize;left:-4px;top:50%;margin-top:-4px;"></div>'+
                    '<div class="rUp" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:n-resize;top:-4px;left:50%;margin-left:-4px;"></div>'+
                    '<div class="rDown" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:n-resize;bottom:-4px;left:50%;margin-left:-4px;"></div>'+
                    '</div>');
                $(function(){
                    $('.drag').each(function(){
                        bindEvents($(this));
                    });
                })
            }else{
                $('.week').remove();
            }
        });
        $('#card_togg input').click(function(){
            $('#h_card').attr("checkbox",true);
            $(this).find('.checked-bg').toggleClass('on');
            if($('#h_card').is(':checked')){
                $('.msg').remove();
                $('#poster').append( '<div  class="drag msg" id="msg" type="msg" index="4" style="zindex:4;left:12px;right: 12px;bottom:86px;">'+
                    '<div class="u-msg">\n' +
                    '<div class="u-pic"><img src="../../images/head2.jpg" alt=""></div>\n' +
                    '<div class="msg-txt">\n' +
                    '<div class="txt1"><span class="time">15:48</span>累计学习<span class="day">2天</span></div>\n' +
                    '<p class="txt2">174489人正在参与，已超过12%的人</p>\n' +
                    '</div>\n' +
                    '</div>'+
                    '<div class="rRightDown" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:nw-resize;right:-4px;bottom:-4px;"></div>'+
                    '<div class="rLeftDown" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:ne-resize;left:-4px;bottom:-4px;"></div>'+
                    '<div class="rRightUp" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:ne-resize;right:-4px;top:-4px;"></div>'+
                    '<div class="rLeftUp" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:nw-resize;left:-4px;top:-4px;"></div>'+
                    '<div class="rRight" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:e-resize;right:-4px;top:50%;margin-top:-4px;"></div>'+
                    '<div class="rLeft" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:e-resize;left:-4px;top:50%;margin-top:-4px;"></div>'+
                    '<div class="rUp" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:n-resize;top:-4px;left:50%;margin-left:-4px;"></div>'+
                    '<div class="rDown" style="position:absolute;background: #00cc19;width:7px;height:7px;z-index:1;font-size:0;cursor:n-resize;bottom:-4px;left:50%;margin-left:-4px;"></div>'+
                    '</div>');
                $(function(){
                    $('.drag').each(function(){
                        bindEvents($(this));
                    });
                })
            }else{
                $('.msg').remove();
            }
        });
    });

    function chooseImg(file){
        var file=file.files[0];
        var reader=new FileReader();
        reader.readAsDataURL(file);
        reader.onload=function(){
            var img=document.getElementById('Img');
            img.src=this.result;
        };
    }
    $("input[type=file]").change(function(){
        var str=$(this).val();
        if(str!==""){
            var arr=str.split("\\");
            var file_name=arr[arr.length-1];
            $(this).siblings('span').text(file_name);
        }
    });
</script>
<!-- 拖动缩放 -->
<script>
    $('form').submit(function(){
        $('.drag').each(function(){
            var obj = $(this);
            var type = obj.attr('type');
            var left = obj.css('left'),top = obj.css('top');
            var d= {left:left,top:top,type:obj.attr('type'),width:obj.css('width'),height:obj.css('height'),radius:obj.css('border-radius')};
            if(type=='realname' ||type=='title' || type=='marketprice' || type=='productprice'){
                d.size = obj.attr('size');
                d.color = obj.attr('color');
            } else if(type=='qr'){
                d.size = obj.attr('size');
            } else if(type=='img'){
                d.src = obj.attr('src');
            }else if(type=='head'){
                d.radius = obj.attr('border-radius');
            } else if(type=='fimg'){
                d.size = obj.attr('size');
            }//粉丝
            data.push(d);
        });
    });
    function bindEvents(obj){
        var index = obj.attr('index');
        var rs = new Resize(obj, { Max: true, mxContainer: "#poster" });
        rs.Set($(".rRightDown",obj), "right-down");
        rs.Set($(".rLeftDown",obj), "left-down");
        rs.Set($(".rRightUp",obj), "right-up");
        rs.Set($(".rLeftUp",obj), "left-up");
        rs.Set($(".rRight",obj), "right");
        rs.Set($(".rLeft",obj), "left");
        rs.Set($(".rUp",obj), "up");
        rs.Set($(".rDown",obj), "down");
        rs.Scale = true;
        var type = obj.attr('type');
        if(type=='date' || type=='week' || type=='msg'){
            rs.Scale = false;
        }
        new Drag(obj, { Limit: true, mxContainer: "#poster" });
        $('.drag .remove').unbind('click').click(function(){
            $(this).parent().remove();
        })

        obj.unbind('click').click(function(){
            bind($(this));
        })
    }
    var imgsettimer = 0 ;
    var nametimer = 0;
    var headsettimer = 0;
    var bgtimer = 0 ;
    function bindType(type){
        $("#goodsparams").hide();
        $(".type4").hide();
        if(type=='4'){
            $(".type4").show();
        } else if(type=='3'){
            $("#goodsparams").show();
        }
    }
    function clearTimers(){
        clearInterval(imgsettimer);
        clearInterval(nametimer);
        clearInterval(bgtimer);
        clearInterval(headsettimer);
    }
    function bind(obj){
        var imgset = $('#imgset'), nameset = $("#nameset"),qrset = $('#qrset'),headset =$("#headset"),fimgset =$("#fimgset");
        imgset.hide();nameset.hide();headset.hide();qrset.hide();fimgset.hide();
        clearTimers();
        var type = obj.attr('type');
        if(type=='realname' || type=='title' || type=='marketprice' || type=='productprice'){
            nameset.show();
            var color = obj.attr('color') || "#000";
            var size = obj.attr('size') || "12";
            var input = nameset.find('input:first');
            var namesize = nameset.find('#namesize');
            var picker = nameset.find('.sp-preview-inner');
            input.val(color); namesize.val(size.replace("pt",""));
            picker.css( {'background-color':color,'font-size':size});
            nametimer = setInterval(function(){
                obj.attr('color',input.val()).find('.text').css('color',input.val());
                obj.attr('size',namesize.val() +"pt").find('.text').css('font-size',namesize.val() +"pt");
            },100);
        } else if(type=='qr'){
            qrset.show();
            var size = obj.attr('size') || "3";
            var sel = qrset.find('#qrsize');
            sel.val(size);

            sel.unbind('change').change(function(){
                obj.attr('size',sel.val())
            });
        }else if(type=='head'){
            headset.show();
            var radius= obj.attr('border-radius') || "0px";

            var head_shape_checked=headset.find("#head_shape_val");
            $("input:radio[name='head_shape']").each(function(){
                if($(this).val()==radius){
                    $(this).prop("checked",true);
                }else{
                    $(this).prop("checked",false);
                }
            })

            head_shape_checked.val(radius);
            headsettimer = setInterval(function() {
                obj.attr('border-radius', head_shape_checked.val());
                obj.find('img').css('border-radius', head_shape_checked.val());
            },100);
        } else if(type=='fimg'){
            fimgset.show();
            var size = obj.attr('size') || "3";
            var sel = fimgset.find('#fimgset');
            sel.val(size);

            sel.unbind('change').change(function(){
                obj.attr('size',sel.val())
            });
        }
    }
    $(function(){
        $('.drag').each(function(){
            bindEvents($(this));
        });
    })
</script>
<script>
    $(function() {
        //二维码
        if ($("div[type=qr]").length == 0) {
            $("#h_qr").click();
        }
        //头像
        if ($("div[type=head]").length == 0) {
            $("#h_pic").click();
        }else{
            //头像形状
            if ($("div[type=head] img").css("border-radius") == "0px") {
                $("#squ").click();
            }else {
                $("#cir").click();
            }
        }
        //昵称
        if ($("div[type=realname]").length == 0) {
            $('#h_name').trigger("click");
        }else {
            //设置颜色
            setcolor();
            //设置字号
            setfontsize();
        }
        //商品主图
        if ($("div[type=sp_pic]").length == 0) {
            $("#h_spPic").click();
        }
        //商品标题
        if ($("div[type=sp_title]").length == 0) {
            $("#h_spTitle").click();
        }
        //时间
        if ($("div[type=sp_time]").length == 0) {
            $("#h_spTime").click();
        }
        //人气
        if ($("div[type=sp_rq]").length == 0) {
            $("#h_rqNum").click();
        }
    });
</script>
</body>
</html>